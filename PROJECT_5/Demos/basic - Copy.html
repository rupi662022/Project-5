<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ניהול גייטפס</title>
    <link rel="stylesheet" type="text/css" href="demos.css" />
    <!--<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,600,400' rel='stylesheet' type='text/css'>-->
    <script src="../Scripts/ajaxCalls.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/jsgrid.css" />
    <link rel="stylesheet" type="text/css" href="../css/theme.css" />

    <script src="../external/jquery/jquery-1.8.3.js"></script>

    <script src="../srcc/jsgrid.core.js"></script>
    <script src="../srcc/jsgrid.load-indicator.js"></script>
    <script src="../srcc/jsgrid.load-strategies.js"></script>
    <script src="../srcc/jsgrid.sort-strategies.js"></script>
    <script src="../srcc/jsgrid.field.js"></script>
    <script src="../srcc/fields/jsgrid.field.text.js"></script>
    <script src="../srcc/fields/jsgrid.field.number.js"></script>
    <script src="../srcc/fields/jsgrid.field.select.js"></script>
    <script src="../srcc/fields/jsgrid.field.checkbox.js"></script>
    <script src="../srcc/fields/jsgrid.field.control.js"></script>

    <style>
        #Add {
            font-family: 'Helvetica Neue Light', 'Open Sans', Helvetica;
            font-weight: 300;
            font-size: 14px;
            float:right;
            margin-right:50px;
        }
    </style>
   
    <!--<script src="../test/hebrew.js"></script>-->

    <script>

        $(document).ready(function () {
            let transportCompany = "אא";
 

            $('#Add').on("click", function () {
                window.location.href = "basic.html";
            });


            $.ajax({
                type: "GET",
                contentType: "application/json; charset=utf-8",
                url: "../api/GatePass?transportCompany=" + transportCompany,
                data: "json"
            }).done(function (data) {

                $("#GatePas").jsGrid({

                    height: "70%",
                    width: "100%",
                    filtering: true,
                    editing: true,
                    inserting: true,
                    sorting: true,
                    sorter: true,
                    paging: true,
                    autoload: true,
                    pageSize: 15,
                    pageButtonCount: 5,
                    deleteConfirm: function (item) {
                        return "?יעבור לארכיון. האם אתה בטוח \"" + item.Id + "\" גייטפס ";
                    },
                    controller: {

                        loadData: function (filter) {
                            return $.grep(data, function (item) {
                                // client-side filtering below (be sure conditions are correct)
                                return (!filter.Id || item.id.indexOf(filter.id) > -1)
                                    && (!filter.ContainerNum || item.ContainerNum.indexOf(filter.ContainerNum) > -1)
                                    && (!filter.ContainerType || item.ContainerType.indexOf(filter.ContainerType) > -1)
                                    && (!filter.TransportCompany || item.TransportCompany.indexOf(filter.TransportCompany) > -1)
                                    && (!filter.Importer || item.Importer.indexOf(filter.Importer) > -1);
                            });

                        },
                        updateItem: function (item) {
                            return $.ajax({
                                type: "PUT",
                                url: "../api/GatePass",
                                data: item
                            });

                        },
                        deleteItem: function (item) {
                            return $.ajax({
                                type: "PUT",
                                url: "../api/GatePass?id=" + item.Id,
                                data: item
                            });

                        }
                    },
                    fields: [
                        { name: "Id", title: 'קוד גייטפס', type: "text", width: 100, sorting: false },
                        { name: "ContainerNum", title: 'מספר מכולה', type: "text", width: 100 },
                        { name: "ContainerType", title: "סוג מכולה", type: "text", width: 100 },
                        { name: "TransportCompany", title: "חברת תובלה", type: "text", width: 100 },

                        //{
                        //    name: "TransportCompany", title: "חברת תובלה", type: "select", items: function (item) {
                        //        return item.transportCompany;
                        //    },
                        //    /* valueField: "Id"*/ width: 100
                        //},

                        { name: "Importer", type: "text", title: "יבואן", width: 100 },

                        {
                            type: "control",
                            //insertButtonClass: function () {
                            //    return $("<button>").attr("type", "button")//מוסיף שורה שלא צריך
                            //    .on("click", function () {
                            //        window.location.href = "CreateGatePass.html";
                            //    });
                            //}
                        },







                        //{ name: "ContainerNum", type: "text", width: 50 },
                        //{ name: "ContainerType", type: "text", width: 50 },
                        //{ name: "TransportCompany", type: "text", width: 100 },
                        //{ name: "Importer", type: "text", width: 100 },
                        //{ name: "note", type: "select", items: GateList.blabla, valueField: "Id", textField: "Name" } ,




                        //{
                        //    type: "control",
                        //    updateButtonTooltip: true,
                        //    modeSwitchButton: false,
                        //    editButton: true,
                        //    headerTemplate: function () {
                        //        return $("<button>").attr("type", "button").text("Add")//מוסיף שורה שלא צריך
                        //            .on("click", function () {
                        //                showDetailsDialog("Add", {});
                        //                sendToArchive(item);
                        //            });
                        //    }
                        //}


                    ]
                });

            });

        })








    </script>


</head>
<body>
    <h1>Basic Scenario</h1>
   <div> <button id="Add">הוסף גייטפס חדש</button></div>
    <div id="GatePas"></div>

    <!--<div id="jsGrid"></div>-->
    <!--  <table class="display nowrap" id="GatePas" style=" width:100%">
        <thead>
            <tr>
                <th>GPS_ContainerNum</th>
                <th>containerType</th>
                <th>transportCompany</th>
                <th>importer</th>
                <!--<th>Married</th>-->
    <!-- <th></th>
    </tr>
    </thead>
    <!--<tbody id="table-body"></tbody>
    </table>-->

</body>
</html>
